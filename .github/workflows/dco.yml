#
# Developer Certificate of Origin (DCO) Enforcement
#
# This workflow ensures that every commit is signed off with a
# `Signed-off-by:` trailer, certifying the contributor's right
# to submit the code.
#

name: 'DCO Sign-Off Check'

on: [push, pull_request]

# Concurrency control ensures that for any given pull request, only the latest
# run of this workflow will proceed, cancelling any older, in-progress runs.
concurrency:
  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}
  cancel-in-progress: true

jobs:
  dco-verification:
    name: 'Verify DCO Sign-Off'
    runs-on: ubuntu-latest

    # This condition prevents the job from running for commits made by Dependabot.
    if: github.actor != 'dependabot[bot]'

    steps:
      - name: 'Check for DCO Sign-Off on all commits'
        uses: tisonkun/actions-dco@v1.0
        with:
          # This is the corrected line. The action requires 'repo-token'.
          repo-token: ${{ secrets.GITHUB_TOKEN }}
